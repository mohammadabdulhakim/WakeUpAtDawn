cmake_minimum_required(VERSION 3.19)
project(untitled LANGUAGES CXX)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

find_package(Qt6 REQUIRED COMPONENTS Core Widgets)

qt_standard_project_setup()

# ğŸ”¹ Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© (Windows ÙÙ‚Ø·)
set(APP_ICON_RESOURCE_WINDOWS "${CMAKE_SOURCE_DIR}/icons/app_icon.rc")

if(WIN32)
    qt_add_executable(untitled
        main.cpp
        mainwindow.cpp
        mainwindow.h
        mainwindow.ui
        resources.qrc
        stb_image.cpp
        Filters.h
    )
else()
    qt_add_executable(untitled
        main.cpp
        mainwindow.cpp
        mainwindow.h
        mainwindow.ui
        resources.qrc
        stb_image.cpp
        Filters.h
    )
endif()

# âœ… Ù†Ø³Ø® Ù…Ù„Ù Ø§Ù„Ù€ QSS Ø¨Ø¹Ø¯ Ø§Ù„Ù€ Build
configure_file(${CMAKE_SOURCE_DIR}/styles.qss
               ${CMAKE_BINARY_DIR}/styles.qss COPYONLY)

# âœ… Ù†Ø³Ø® Ù…Ø¬Ù„Ø¯ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ (Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ù€ build)
add_custom_command(TARGET untitled POST_BUILD
    COMMAND ${CMAKE_COMMAND} -E copy_directory
            "${CMAKE_SOURCE_DIR}/icons"
            "${CMAKE_BINARY_DIR}/icons"
    COMMENT "ğŸ” Copying icons to build folder..."
)

# ğŸ”¹ Ø±Ø¨Ø· Ù…ÙƒØªØ¨Ø§Øª Qt
target_link_libraries(untitled
    PRIVATE Qt::Core Qt::Widgets
)

# ğŸ”¹ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØ«Ø¨ÙŠØª
include(GNUInstallDirs)
install(TARGETS untitled
    BUNDLE DESTINATION .
    RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR}
)
